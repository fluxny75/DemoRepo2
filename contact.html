<html>
<head>
<link rel="stylesheet" href="css/style.css">
	<style>
		

	</style>
<script src="script/jquery.min.js"></script>
</head>
<body>
	<div class="content_message">
		<p class="descrition_label">YOU WILL LIKE TO SEE THIS. <br> If you add a URL to this message, please make sure that it is contained in-full, in one sms message (Check the preview on the right side).

		</p>

		<div class="sms_mms">
			<span> SMS or MMS: </span>
			<label><input id="sms_check" type="checkbox" class="ios-switch green" /><div > <span id="1">MMS</span><div id="2"></div></div></label>
			
			<div class='opt_imgs opts_blue' > 
				<span id="opt_imgs1b" class="imgs_opts_span" onclick="showHideURLModal()" ><img class="imgs_opts1" src="img/url-blue.png" alt="uno"></span>
				<span id="opt_imgs2b" class="imgs_opts_span" onclick="showHideMediaModal()"><img class="imgs_opts2"  src="img/media-bue.png" alt="dos"></span>
				<span id="opt_imgs3b" class="imgs_opts_span" onclick="showHideshortURLModal()"><img class="imgs_opts3" src="img/asu-blue.png" alt="dos"></span>
			</div>
			<div class='opt_imgs opts_green opt_hide' > 
				<span id="opt_imgs1g" class="imgs_opts_span" onclick="showHideURLModal()" ><img class="imgs_opts1" src="img/url-green.png" alt="uno"></span>
				<span id="opt_imgs2g" class="imgs_opts_span" onclick="showHideImgSMSModal()"><img class="imgs_opts2" src="img/media-green.png" alt="dos"></span>
				<span id="opt_imgs3b" class="imgs_opts_span" onclick="showHideshortURLModal()"><img class="imgs_opts3" src="img/asu-green.png" alt="dos"></span>
			</div>
			
			<div class="message_txt">
				<div class="message_txt_label" >Message: <br> 
					<span>0</span>charts.<br>
					(<span>0</span>msg.)<br>
				</div>
				<textarea name="" id="message_txt_area" cols="67" rows="5"></textarea>
				<div class="note">CONTACT PAGE ONLY!!!!!!!!</div>
			</div>
		</div>
	</div>

<script>
// change the text of the switch and the options
$("#sms_check").click(function(event) {
	$(this).toggleClass('sms');
	if( $(this).is(':checked') ){
		$('#1').html('SMS');
		$('.opts_green').removeClass('opt_hide');
		$('.opts_blue').addClass('opt_hide');
	} else {
		$('#1').html('MMS');
		$('.opts_blue').removeClass('opt_hide');
		$('.opts_green').addClass('opt_hide');
	}
});

/********************** MODAL MEDIA **********************/
function showHideMediaModal() {
	$('.modal_multimedia').toggle('modal_hide');
	clearModal ();
	$('#media_type option[value=0]').prop('selected', true)
	
}

//reset the options to add media
function clearModal () {
	$('.media_hide_opt').hide();
	$('.media_hide').hide(); $('.button_hide').hide();
	$('input[type=text]').val('');

}

//change the fields according to type
$('#media_type').change(function(event) {
	var tipo = $('#media_type option:selected').val();
		clearModal();
		$('input:radio[value=upload]').prop('checked', true);

	switch(tipo) {
	    case 'img':
	        $('.img_media_opt').show();
	        $('input:radio[name=img_media_opt]:first').prop('checked',true);
	        // $('input:radio[id=existing_img]').prop('checked',true);
	        $('.img_media_upload').show();
	        break;

	    case 'qrcode':
	        $('.qr_media').show();
			$('#addQR_media').show();
	        break;

        case 'video':
        	$('.video_media_opt').show();
        	$('.video_media').show();
	        break;
	    case 'audio':
	    	$('.audio_media_opt').show();
	    	$('.audio_media').show();
	        break;
	}
});

$('input:radio[name=img_media_opt]').change(function(event) {
	var opt1=$('input:radio[name=img_media_opt]:checked').val();
		$('.media_hide').hide(); 
		$('.button_hide').hide();

	if(opt1 =='upload'){
		$('.img_media_upload').show();
	}else{
		$('.img_media_existing').show();
	}
	$('#addImg_media').show();

});

$('input:radio[name=video_media_opt]').change(function(event) {
	var opt1=$('input:radio[name=video_media_opt]:checked').val();
		$('.media_hide').hide(); 
		$('.button_hide').hide();

	if(opt1 =='upload'){
		$('.video_media').show();
	}else{
		$('.video_media_existing').show();
	}
	$('#addVideo_media').show();

});

$('input:radio[name=audio_media_opt]').change(function(event) {
	var opt1=$('input:radio[name=audio_media_opt]:checked').val();
		$('.media_hide').hide(); 
		$('.button_hide').hide();

	if(opt1 =='upload'){
		$('.audio_media').show();
	}else{
		$('.audio_media_existing').show();
	}
	$('#addAudio_media').show();

});
	
//*********************** MODAL URL ****************//
function showHideURLModal() {
	$('.url_modal').toggle('modal_hide');
}


$('input:radio[name=url_opt]').change(function(event) {
	var opt2=$('input:radio[name=url_opt]:checked').val();
	
	$('.media_hide').hide(); $('.short_url').hide();
		console.log(opt2);
	if(opt2 =='short'){
		$('.short_url').show();
	}else{
		$('.short_app_url').show();
	}
	opt2='nada';
});

//******* MODAL NEW URL ******************/
function showHideAddNewURLModal() {
	$('.new_url_modal').toggle('modal_hide');
}

// evaluating the files to upload
$('#img_Upload').change(function(event) {
	validateSizeExt($(this).val(),'img_Upload','img');
});
$('#video_Upload').change(function(event) {
	validateSizeExt($(this).val(),'video_Upload','video');
});
$('#audio_Upload').change(function(event) {
	validateSizeExt($(this).val(),'audio_Upload','audio');
});

$('#img_sms_Upload').change(function(event) {
	validateSizeExt($(this).val(),'img_sms_Upload','img');
});




function showHideshortURLModal () {
	// $('.modal').hide();
	$('.short_app_url_modal').toggle('modal_hide');
}

function showHideImgSMSModal () {
	// $('.modal').hide();
	$('.modal_img_sms').toggle('modal_hide');
}
//this function only validates the extension and size
function validateSizeExt(file, inputfile,type) { 
	if (type=='img')
		var extensionAllowed = new Array(".gif", ".jpg", ".png");

	if (type=='video')
		var extensionAllowed = new Array(".mp4");
	
	if (type=='audio')
		var extensionAllowed = new Array(".aac");
	
	 

	var allowed=false;
	var size=0;
	if (!file) { 
		//Si no tengo file, es que no se ha seleccionado un file en el formulario 
		console.log("no file loaded"); 
	}else{ 
		//recupero la extensión de este nombre de file 
		extension = (file.substring(file.lastIndexOf("."))).toLowerCase(); 

		//compruebo si la extensión está entre las permitidas 
		for (var i = 0; i < extensionAllowed.length; i++) { 
			if (extensionAllowed[i] == extension) { 
				allowed = true; 
				break; 
			} 
		} 
		if (allowed) { 
			//submito! 
			if (typeof FileReader !== "undefined") {
				size = document.getElementById(inputfile).files[0].size;
				// check file size
				if (size <=519936) {
					console.log(size);
					console.log("File OK");
					//Do something
				}else{
					alert("file too big");
					$('#'+inputfile).val('');
				}
				
			}else{
				console.log("could not read file");
			}
			
			return 1; 
		}else{
			alert("type of file not allowed");
			$('#'+inputfile).val('');
		} 
	} 		
	return 0; 
}


</script>
</body>
</html>